!function(t,e,i){function n(t,e){return!!t&&t.hasOwnProperty&&t instanceof e}function s(e){var i=o(e);return i&&i.length>0?t(i):null}function o(e){var i=t.map(e,function(t){return t});return t.map(i,function(t){return n(t,jQuery)?t.get():t})}function r(){var e=t.makeArray(arguments);return t.map(e,function(t){return n(t,l)?t.root():t})}function a(t){this.name="NestingProhibitedError",this.tag=t}var l=e.Buildr=function(){this.stack=[],this.elements=[],this.tags=l.prototype.tags.concat()};a.prototype=Error.prototype;var h={},c=["append","prepend"];t.each(c,function(e,i){h[i]=t.fn[i],t.fn[i]=function(){var e=t.makeArray(arguments),n=r.apply(this,e);return h[i].apply(this,n)}});var u=!0,d=function(){t.each(c,function(e,i){t.fn[i]=h[i]}),u=!1},p=function(t){return this.elements.splice(0,this.elements.length),t?s(t.call(this,this)||this.root()):this};t.extend(l.prototype,{buildr:p,build:p,tags:[],defineTag:function(){var e=t.makeArray(arguments),i=this;return t.each(e,function(e,n){i.tags.push(n),n=n.replace("/",""),i[n]=function(){var e=t.makeArray(arguments);return e.unshift(n),this.tag.apply(this,e)}}),this},isSelfClosing:function(e){return t.inArray(e+"/",this.tags)>-1},tag:function(){var e=t.makeArray(arguments),i=this,n=e.shift(),s=function(){return i},o=this.$=t.extend(t("<"+n+">"),{buildr:s,build:s}),r=this.stack[0];return u&&t.extend(o,f),r&&r.append(o),this.elements.push(o),f.nest.apply(o,e),o},root:function(){return t.grep(this.elements,function(t){return 0===t.parent().length})},each:function(e,i){return t.each(e,i.bind(this)),this},extend:function(){var e=t.makeArray(arguments),i=this;return t.each(e,function(e,n){t.each(n,function(t,e){i[t]=e.bind(i)})}),i}}),l.prototype.defineTag("a","abbr","acronym","address","article","aside","audio","b","bdi","bdo","big","blockquote","body","button","caption","canvas","command","cite","code","colgroup","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","html","i","iframe","ins","keygen","kbd","label","legend","li","map","mark","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","samp","section","script","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","thead","time","title","tr","track","tt","ul","var","video","wbr","area/","base/","br/","col/","frame/","hr/","img/","input/","link/","meta/","param/");var f={id:function(t){return this.attr({id:t})},"class":function(t){return this.removeClass().addClass(t)},nest:function(){var e=this,i=this.buildr(),s=t.makeArray(arguments),o=e.get(0).tagName.toLowerCase(),r=i.isSelfClosing(o),l=function(h){if(t.isPlainObject(h))e.attr(h);else{if(r)throw new a(o);if(n(h,jQuery))e.append(h);else if(t.isArray(h)&&t.isFunction(s[0]))items=h,iterator=s.shift(),f.nest.call(e,function(){i.each(items,iterator)});else if(t.isFunction(h)){var c=h.call(i,i);c&&l(c)}else e.text(h.toString())}};for(i.stack.unshift(e);s.length>0;)l(s.shift());return i.stack.shift(),this}};f.el=f.nest,t.extend(l,{untouch:d,NestingProhibitedError:a}),t.buildr=function(){for(var e=new l,n=t.isArray(arguments)?arguments:t.makeArray(arguments),o=[],r=0,a=n.length,h=i;a>r;r++)switch(t.type(h=n[r])){case"function":o.push(e.buildr(h));break;case"object":e.extend(h);break;case"string":e.defineTag(h)}return s(o)||e},t.buildr.defineTag=l.prototype.defineTag.bind(l.prototype),t.buildr.tags=l.prototype.tags,t.fn.buildr=function(){return this.append(t.buildr.apply(t.buildr,t.makeArray(arguments)))},t.build||(t.build=t.buildr),t.fn.build||(t.fn.build=t.fn.buildr)}(jQuery,this);