define(["jquery"],function(t,e){function i(t,e){return!!t&&t.hasOwnProperty&&t instanceof e}function n(t){return _isElement(t)&&("radio"==t.type||"checkbox"==t.type)}function s(t){return"string"==typeof t?t.replace(/\r/g,""):null===t||t===e?"":t}function o(i){if(i===e)return e;var n,o=i.type,r=i.nodeName.toLowerCase(),a=t.valHooks[o]||t.valHooks[r];if(a&&"get"in a&&(n=a.get(i,"value"))!==e)return n;switch(r){case"select":case"textarea":return s(i.value);case"input":return"radio"==o||"checkbox"==o?i.checked?s(i.value):e:s(i.value)}}function r(i,n){var s=i.type,o=i.nodeName.toLowerCase(),r=t.valHooks[s]||t.valHooks[o];if(!(r&&"set"in r&&r.set(i,n,"value")!==e))switch(o){case"select":case"textarea":i.value=n;break;case"input":"radio"==s||"checkbox"==s?i.value===n&&(i.checked=!0):i.value=n}}function a(t,e){var i=t[0],n={};return e.exists()&&!e.equals($html)&&(n.containerTop=e.scrollTop(),n.containerBottom=n.containerTop+e.height(),n.elementTop=i.offsetTop,n.elementBottom=n.elementTop+t.height()),n}function l(i,n){for(var s,o,r,a={},h=0,c=i.length;c>h;h++)if(s="["+h+"]",r=t.type(o=i[h]),!n||n.call(o,h,o))if("object"==r||"array"==r)for(var u="array"==r?l(o,n):t.object.flatten(o,n),d=0,p=Object.keys(u),f=e,g=p.length;g>d;d++)f=p[d],a["object"==r?s+"."+f:s+f]=u[f];else a[s]=o;return a}window.$html=jQuery("html"),window.$win=jQuery(window),window.$doc=jQuery(document).ready(function(){window.$body=jQuery("body")});var h={script:/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,brackets:/\[(\w+)\]/g,nameBrackets:/\[(\D+)\]/g,arrayBrackets:/\[(\d+)\]/g,numberInBrackets:/((?!\[)\d+(?=\]))/g,escapable:/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,html:/^(?:html)$/i};t.extend(t.expr[":"],{attached:function(e){return t.contains(document.documentElement,e)},detached:function(e){return!t.contains(document.documentElement,e)},emptyInput:function(e){return t(e).isEmpty()},checkable:function(t){return n(t)},active:function(e){return t(e).is(":enabled:visible")},inactive:function(e){return!t(e).is(":active")},activeInput:function(e){return t(e).is(":input:enabled:visible")},activeTextInput:function(e){return t(e).is("input:text:enabled:visible")},exists:function(e){return t(e).exists()},viewable:function(e){var i=t(e),n=a(i,i.closest(":scrollable")),s=document.documentElement.scrollTop||document.body.scrollTop,o=i.offset().top,r=o>s&&i.height()+o<s+t.clientHeight();return r&&!t.isEmptyObject(n)&&(r=n.elementTop>=n.containerTop&&n.elementBottom<=n.containerBottom),r},external:function(t){return t.href?t.hostname&&t.hostname!==window.location.hostname:!1},scrollable:function(t,e,i){var n={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},s={auto:!0,scroll:!0,visible:!1,hidden:!1},o=n["string"==typeof i[3]&&i[3].toLowerCase()]||n.both,r=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,a={x:s[r.overflowX.toLowerCase()]||!1,y:s[r.overflowY.toLowerCase()]||!1,isRoot:h.html.test(t.nodeName)};if(!a.x&&!a.y&&!a.isRoot)return!1;var l={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(a.x||a.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(a.y||a.isRoot)&&this.height.scroll>this.height.client}};return o.y&&l.scrollableY()||o.x&&l.scrollableX()}}),t.fn.extend({each$:function(e){for(var i=0,n=this.length,s=t([1]);n>i&&e.call(s.context=s[0]=this[i],i,s)!==!1;i++);return this},if$:function(e){var i=!e||t.isFunction(e)&&!e.apply(this,Array.prototype.slice.call(arguments,1))?[]:this;return this.pushStack(i,"if$",e)},exists:function(){return this.length>0},value:function(i){if(!arguments.length||i===e){var s=this.length,a=e,l=e;if(!s)return;for(var h=0;s>h;h++){if(!n(a=this[h])){l=this[0];break}a.checked&&(l=a)}return o(l)}var c=e,u=t.isFunction(i);return this.each(function(e){_isElement(this)&&(c=u?i.call(this,e,o(this)):i,null==c?c="":"number"==typeof c?c+="":t.isArray(c)&&(c=t.map(c,function(t){return null==t?"":t+""})),r(this,c))})},root:function(){var t=e;return this.each$(function(e,i){return 0===i.parent().length?(t=i,!1):void 0}),t||this},changeValue:function(t,i){if(t===e)return this;var n;return this.each$(function(e,s){n=o(this),(i||n!==o(this))&&s.value(t).trigger("change")})},mapInputs:function(t){var i,n,s={};return this.find(":input[name]").not(":button").each(function(){i=o(this),i!==e&&(n=this.name,s[n in t?t[n]:n]=i)}),s},mapModel:function(e,i){var n,s;return this.find(":input[name]").not(":button").each(function(){n=i?i[this.name]:this.name,s=t.object.getProperty(n,e),s&&(r(this,s),this.defaultValue=s)}),this},outerHTML:function(){if(!this.exists())return"";var e=this[0];return e.outerHTML?e.outerHTML:t("<div />").append(this.clone()).html()},scrollIntoView:function(e){if(this.exists()){t.isFunction(e)&&(e={complete:e});var i,n=this.closest(":scrollable"),s=a(this,n);s.elementTop<s.containerTop?i=s.elementTop:s.elementBottom>s.containerBottom&&(i=s.elementBottom-n.height()),n.animate({scrollTop:i},t.extend(!0,{duration:"slow",queue:!1},e))}return this}}),t.extend({preloadImages:function(e){return"string"==t.type(e)&&(e=[e]),t.Deferred(function(i){(!Array.isArray(e)||e.isEmpty())&&i.reject();for(var n=0,s=e.length,o=0;s>n;n++){var r=t(new Image).on("load",function(){++o===s&&i.resolve()}).attr("src",e[n]);"pending"==i.state()&&r.prop("complete")&&r.trigger("load")}}).promise()},isNode:function(t){return"object"==typeof Node?i(t,Node):t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},isElement:function(t){return"object"==typeof HTMLElement?i(t,HTMLElement):t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},is$:function(t){return i(t,jQuery)},checkedValue:function(e,i){return t('input:checkable[name="'+e+'"]').value(i)},clientHeight:function(){return document.documentElement.clientHeight},clientWidth:function(){return document.documentElement.clientWidth},scrollbarWidth:function(){var e=t('<div style="width:50px;height:50px;overflow:auto"><div /></div>').appendTo($body),i=e.children(),n=i.innerWidth()-i.height(99).innerWidth();return e.remove(),n},object:{filter:function(t,e){for(var i,n,s={},o=0,r=Object.keys(t),a=r.length;a>o;o++)e.call(n=t[i=r[o]],i,n)&&(s[i]=n);return s},flatten:function(e,i){for(var n,s,o,r={},a=0,h=Object.keys(e),c=h.length;c>a;a++)if(o=t.type(s=e[n=h[a]]),!i||i.call(s,n,s))switch(o){case"object":if(!t.isPlainObject(s)||t.isEmptyObject(s))r[n]=s;else for(var u,d=0,p=t.object.flatten(s,i),f=Object.keys(p),g=f.length;g>d;d++)r[n+"."+(u=f[d])]=p[u];break;case"array":if(0==s.length)r[n]=s;else for(var m=0,v=s.length;v>m;m++)for(var d=0,p=l(s,i),f=Object.keys(p),g=f.length;g>d;d++)r[n+(u=f[d])]=p[u];break;default:r[n]=s}return r},expand:function(i){for(var n={},s=0,o=Object.keys(i),r=e,a=o.length;a>s;s++)t.object.setProperty(n,r=o[s],i[r]);return n},getProperty:function(t,i){if(!t)return e;for(var n=e,s=e,o=e,r=0,a=t.replace(h.nameBrackets,".$1").split("."),l=a.length,c=e;l>r;r++){if(n=n||i,s=(c=a[r]).match(h.numberInBrackets)){n=(c=c.substring(0,c.indexOf("[")))in n?n[c]:n[c]=[];for(var u=0,d=s.length,p=d-1;d>u;u++){if(!((o=s[u])in n))return e;p>u&&(n=n[o])}}n=(o||c)in n?n[o||c]:e}return n},setProperty:function(t,i,n){if(!i)return!1;for(var s=e,o=e,r=e,a=0,l=i.replace(h.nameBrackets,".$1").split("."),c=l.length,u=e;c>a;a++){if(s=s||t,u=l[a],o=u.match(h.numberInBrackets)){s=(u=u.substring(0,u.indexOf("[")))in s?s[u]:s[u]=[];for(var d=0,p=o.length;p>d;d++)r=o[d],p-1>d&&(s=r in s?s[r]:s[r]=[])}c-1>a?s=(r||u)in s?s[r||u]:s[r||u]={}:s[o?r:u]=n,r=e}return s!==e},serialize:function(e,i){for(var n,s,o=[],r=i||{},a=0,l=Object.keys(t.object.flatten(e,r.filter)),h=l.length;h>a;a++)n=l[a],s=e[n],r.fieldMap&&n in r.fieldMap&&(n=r.fieldMap[n]),o[o.length]=encodeURIComponent(n)+"="+encodeURIComponent(s);return o.join("&").replace(/%20/g,"+")},transform:function(e,i){for(var n,s,o={},r=0,a=Object.keys(e),l=a.length;l>r;r++)t.extend(o,i.call(s=e[n=a[r]],n,s));return o}}}),$object=t.object});