define("jquery.showtime",["jquery","jquery-ui","jquery.extensions","jquery.buildr"],function(c,d){var h=d,k=d,l=d,p=d,q=d,s=d,r=d,g=d,n=d,u={modal:!0,opacity:0.75,minWidth:350,minHeight:32,maxWidth:450,fixed:!0,autoResize:!1,imagesPath:"../../resources/images/",imageTypes:["jpg","jpeg","png","gif","bmp"],speed:200,title:"",fontFamilies:["Ubuntu:400,500,700,400italic,500italic,700italic:latin"],content:d,draggable:{cursor:"move",handle:"#showtimeHeader, #showtimeFooter",opacity:0.5,cancel:"#showtimeContent, .Showtime-button, #closeBtn",
	initialized:!1},resizable:{alsoResize:"#showtimeContent",autoHide:!0,handles:"e, se, s"},buttons:d,loadingMessage:"Loading, please wait...",loadingImage:"roller.gif",callback:c.noop,ajaxOpts:{type:"GET"}},v={name:"loading",options:{buttons:d}},w={name:"info",options:{title:"Info",buttons:d}},x={name:"dialog",options:{buttons:{ok:null}}},y={name:"confirm",options:{title:"Confirm Action",modal:!0,buttons:{ok:null,cancel:null}}},z={name:"lightbox",options:{modal:!0,buttons:d}},t=function(b,a){this.$obj=
		c(this);this.open=!1;this.name="Showtime";this.options=b;this.element=a;this.isResizable=this.isDraggable=!1;this.mode=d;this._init()};t.prototype={_init:function(){this.options=c.extend(!0,{},u,this.options);c(this.element);this._addEvents();h===d&&(this._buildHtml(),c.preloadImages([this.options.imagesPath+this.options.loadingImage]));this.options.imageFilter=this._generateImageFilter(this.options.imageTypes);c.isArray(this.options.fontFamilies)&&this._loadFont(this.options.fontFamilies)},_generateImageFilter:function(b){if(!c.isArray(b))return RegExp();
	for(var a=".(",e=0,f=b.length;e<f;e++)a=a+b[e]+"|";return RegExp(a.substring(0,a.length-1)+")$","i")},option:function(b,a){if(c.isPlainObject(b))this.options=c.extend(!0,this.options,b);else{if(b&&"undefined"===typeof a)return this.options[b];this.options[b]=a}return this},loading:function(){this._launch(null,null,v)},info:function(b,a){this._launch(b,a,w)},dialog:function(b,a){this._launch(b,a,x)},confirm:function(b,a){this._launch(b,a,y)},lightbox:function(b,a){this._launch(b,a,z)},_launch:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            a,e){b&&(this.mode=e,this.$obj.triggerHandler("showtime.open",[b,c.extend(!0,e.options,a||{})]))},remove:function(){var b=this,a=c({});this.open&&a.queue("showtime.destroy",function(a){c.when(b._close()).then(a)});a.queue("showtime.destroy",function(a){b._removeEvents();h.remove()});a.dequeue("showtime.destroy")},_open:function(b,a){try{if(!this.open){a=c.isPlainObject(a)?c.extend(!0,{},this.options,a):this.options;b=a.content||b;var e=this;this.$obj.queue("showtime.open",function(a){c.when(e._showLoading()).then(a)});
	b&&(this.$obj.queue("showtime.open",function(f){c.when(e._getContent(b,a)).then(function(a){b=a;f()})}),this.$obj.queue("showtime.open",function(f){var d,g,m,n;l.if$(!l.children().exists()).html(b).end().appendTo($body);d=l.outerWidth(!0);a.draggable&&c.fn.draggable&&(h.draggable(a.draggable),e.isDraggable=!0);d>a.maxWidth?l.css("width",a.maxWidth):d<a.minWidth&&l.css("width",a.minWidth);g=l.outerWidth(!0);m=l.outerHeight(!0);a.overrideFixed=a.fixed&&m>c.clientHeight();a.fixed&&!a.overrideFixed||
	e.$obj.queue("showtime.openChild",function(a){c.when(e._scrollToTop()).then(a)});e.$obj.queue("showtime.openChild",function(b){l.prependTo(k);p=c("<div />",{id:"showtimeHeader"}).build(function(b){a.title&&b.h1(a.title,{id:"showtimeTitle","class":"content-separator"});b.div({id:"titleButtons"},function(){b.a({id:"closeBtn","class":"showtime-button"},function(){b.span({"class":"icon-remove"})}).on("click",function(){e.$obj.triggerHandler("showtime.close")})})}).prependTo(k);m+=p.outerHeight(!0);c.isPlainObject(a.buttons)&&
	(q=c("<div />",{id:"showtimeFooter"}).build(function(a){a.div({id:"footerButtons"})}).appendTo(k),s=c("#footerButtons"),this._addButtons(a.buttons),m+=q.outerHeight(!0));a.resizable&&c.fn.resizable&&(a.resizable=c.extend(!0,a.resizable,{minHeight:m,minWidth:g}),k.resizable(a.resizable),e.isResizable=!0);n=-1*((g+parseInt(h.css("borderLeftWidth"),10)+parseInt(h.css("borderRightWidth"),10))/2);r.hide().remove();h.animate({marginLeft:n+"px"},a.speed).fadeIn(a.speed);k.animate({width:g+"px",height:m+
			"px"},a.speed).promise().then(function(){k.children().fadeIn(a.speed);a.autoResize&&k.css("height","auto")}).then(a.callback).then(b).then(f)}).dequeue("showtime.openChild")}));this.$obj.queue("showtime.open",function(a){c.when(e._showOverlay()).then(a)});this.$obj.queue("showtime.open",function(){e.open=!0}).dequeue("showtime.open")}}catch(f){this.$obj.clearQueue("showtime"),c.error(f.name+"\n"+f.message)}},_showOverlay:function(){var b=this;g.appendTo($body);if(this.options.modal)(Modernizr.compliantzindex?
		g:g.contents()).on("click",function(){b.$obj.triggerHandler("showtime.close")});Modernizr.cssfilters&&n.removeClass("no-blur").addClass("blur");return g.fadeIn(100).promise()},_showLoading:function(){k.children().hide().end().append(r.show());return h.css({marginLeft:-1*(h.outerWidth()/2)}).fadeIn(this.options.speed).promise()},_getContent:function(b,a){return c.Deferred(function(e){if("string"==c.type(b)&&0<=b.indexOf(":")){var f=b.split(":");switch(f[0]){case "text":e.resolve(f[1]);break;case "image":b.match(a.imageFilter)||
c.error("Image type of "+f[1]+" is not allowed. Please check the imageTypes option.");c.when(c.preloadImages(a.imagesPath+[f[1]])).then(function(){e.resolve(c("<img />",{src:a.imagesPath+f[1]}))});break;case "href":c.ajax(f[1],a.ajaxOpts).done(function(a){e.resolve(a)})}}}).promise()},_scrollToTop:function(){this.options.currentScrollTop=$body.scrollTop();return c("body, html").animate({scrollTop:0},this.options.speed).promise()},_close:function(){try{if(this.open){var b=this;c.when(h.fadeOut(this.options.speed,
		function(){b._resetStyles()}).promise()).then(function(){b._hideOverlay()}).then(function(){b.open=!1})}}catch(a){c.error("Error Closing Showtime Plugin\n"+a.message)}},_hideOverlay:function(){if(!this.options.modal)return c.Deferred().promise();Modernizr.cssfilters&&n.toggleClass("blur no-blur");return g.fadeOut(100,function(){g.remove()}).promise()},_resetStyles:function(){var b=this;return c.Deferred(function(a){r.remove();l.css({width:"auto",height:"auto"}).empty();h.css({width:"auto",height:"auto",
	top:"",left:""});k.css({width:b.options.minWidth+"px",height:b.options.minHeight+"px"});p&&p.remove();q&&q.remove();b.isDraggable&&(h.draggable("destroy"),b.isDraggable=!1);b.isResizable&&(k.resizable("destroy"),b.isResizable=!1);a.resolve()}).promise()},_addEvents:function(){var b=this;$doc.off("keydown.showtime").on("keydown.showtime",function(a){27===a.keyCode&&b._close()});this.$obj.off("showtime").on({"showtime.open":function(a,c,f){b._open.apply(b,[c,f])},"showtime.button-click":function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     c,f){b._buttonClick.apply(b,[c,f])},"showtime.close":function(){b._close.apply(b)}})},_removeEvents:function(){$doc.off("keydown.showtime");this.$obj.off("showtime")},_buildHtml:function(){var b=this;g=Modernizr.compliantzindex?c("<div />",{id:"overlay"}):c("<iframe />",{id:"overlay",src:'javascript:"";',tabindex:"-1",frameborder:"0",style:"top: expression(((parseInt(this.parentNode.currentStyle.borderTopWidth) || 0) * -1) + 'px');left: expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth) || 0) * -1) + 'px');width: expression(this.parentNode.offsetWidth + 'px');height: expression(this.parentNode.offsetHeight + 'px')"});
	r=c("<div />",{id:"showtimeLoading"}).build(function(a){a.img({alt:"Loading Image",src:b.options.imagesPath+b.options.loadingImage});a.span(b.options.loadingMessage)});n=$body.children();h=c("<div />",{id:"showtime"}).build(function(a){a.div({id:"showtimeContainer"},function(){a.div({id:"showtimeContent"})})}).appendTo($body.append(g));k=c("#showtimeContainer");l=c("#showtimeContent");c("#closeBtnImage")},_addButtons:function(b){var a=this;c.isPlainObject(b)&&c.each(b,function(b,c){s.build(function(d){d.a(b.charAt(0).toUpperCase()+
		b.slice(1),{id:b+"ShowtimeButton"}).on("click.showtime",function(){a.$obj.trigger("showtime.button-click",[b,c])})})})},_loadFont:function(b){window.WebFontConfig={google:{families:b}};b=document.createElement("script");b.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";b.type="text/javascript";b.async="true";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)},_buttonClick:function(b,a){if(a&&c.isFunction(a))a.call();
else switch(b){case "ok":this.$obj.triggerHandler("showtime.close");break;case "cancel":case "close":this.$obj.triggerHandler("showtime.close")}}};c.widget.bridge("showtime",t)});